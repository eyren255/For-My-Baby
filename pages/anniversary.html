<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Anniversary Â· For My Baby</title>
        <link rel="icon" type="image/svg+xml" href="../favicon.svg" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../styles.css" />
        <link rel="manifest" href="../site.webmanifest" />
    </head>
    <body>
        <header class="site-header">
            <div class="container row between center">
                <a class="brand" href="../index.html">For My Baby</a>
                <nav class="nav">
                    <a href="../index.html">Home</a>
                    <a href="./anniversary.html" aria-current="page">Anniversary</a>
                    <a href="./reasons.html">Reasons</a>
                    <a href="./cards.html">Cards</a>
                </nav>
            </div>
        </header>
        <main class="container site-grid">
            <section class="section card span-2">
                <h1 class="section-title">ðŸ“… Anniversary</h1>
                <div class="stat">
                    <div class="stat-number" id="daysTogether">0</div>
                    <div class="stat-label">Days together</div>
                </div>
                <p class="muted">
                    Next anniversary in
                    <strong>
                        <span id="daysToAnniv">0</span>
                        days
                    </strong>
                    Â·
                    <span id="nextMilestone">1 year</span>
                </p>
            </section>
        </main>
        <footer class="site-footer">
            <div class="container center muted">
                Made with ðŸ’• Â· Â©
                <span id="year"></span>
            </div>
        </footer>
        <script>
            document.getElementById("year").textContent = new Date().getFullYear();
            (function () {
                const startDateStr = "2025-09-13";
                const start = new Date(startDateStr + "T00:00:00");
                const daysEl = document.getElementById("daysTogether");
                const annivEl = document.getElementById("daysToAnniv");
                const milestoneEl = document.getElementById("nextMilestone");
                if (isNaN(start.getTime())) return;
                const today = new Date();
                const diffMs = today.setHours(0, 0, 0, 0) - start.setHours(0, 0, 0, 0);
                const days = Math.max(0, Math.floor(diffMs / 86400000));
                if (daysEl) daysEl.textContent = String(days);
                const year = today.getFullYear();
                const m = (start.getMonth() + 1).toString().padStart(2, "0");
                const d = start.getDate().toString().padStart(2, "0");
                const thisAnniv = new Date(`${year}-${m}-${d}T00:00:00`);
                const nextAnniv =
                    thisAnniv >= new Date(today.toDateString())
                        ? thisAnniv
                        : new Date(`${year + 1}-${m}-${d}T00:00:00`);
                const daysTo = Math.ceil((nextAnniv - new Date()) / 86400000);
                if (annivEl) annivEl.textContent = String(Math.max(0, daysTo));
                const years = nextAnniv.getFullYear() - start.getFullYear();
                if (milestoneEl)
                    milestoneEl.textContent = years + (years === 1 ? " year" : " years");
            })();
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker.register("../sw.js").catch(() => {});
                });
            }
        </script>
    </body>
</html>
